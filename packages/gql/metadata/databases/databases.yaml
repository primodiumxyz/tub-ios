- name: default
  kind: postgres
  configuration:
    connection_info:
      database_url:
        from_env: PG_DATABASE_URL
      isolation_level: read-committed
      use_prepared_statements: false
  customization:
    naming_convention: hasura-default
  logical_models:
    - fields:
        - name: token_id
          type:
            nullable: false
            scalar: uuid
        - name: mint
          type:
            nullable: false
            scalar: text
        - name: name
          type:
            nullable: false
            scalar: varchar
        - name: symbol
          type:
            nullable: false
            scalar: varchar
        - name: latest_price
          type:
            nullable: false
            scalar: numeric
        - name: increase_pct
          type:
            nullable: false
            scalar: float8
        - name: trades
          type:
            nullable: false
            scalar: bigint
        - name: created_at
          type:
            nullable: false
            scalar: timestamptz
      name: GetFormattedTokensResult
      select_permissions:
        - permission:
            columns:
              - token_id
              - mint
              - name
              - symbol
              - latest_price
              - increase_pct
              - trades
              - created_at
            filter: {}
          role: public
    - fields:
        - name: id
          type:
            nullable: true
            scalar: uuid
        - name: account
          type:
            nullable: true
            scalar: uuid
        - name: amount
          type:
            nullable: true
            scalar: numeric
        - name: created_at
          type:
            nullable: true
            scalar: timestamptz
        - name: created_at_offset
          type:
            nullable: true
            scalar: timestamptz
      name: account_transaction_offset_model
    - fields:
        - name: balance
          type:
            nullable: true
            scalar: numeric
        - name: created_at_offset
          type:
            nullable: true
            scalar: timestamptz
      name: balance_offset_model
    - fields:
        - name: id
          type:
            nullable: true
            scalar: uuid
        - name: token
          type:
            nullable: true
            scalar: uuid
        - name: price
          type:
            nullable: true
            scalar: numeric
        - name: created_at
          type:
            nullable: true
            scalar: timestamptz
        - name: internal_token_transaction_ref
          type:
            nullable: true
            scalar: uuid
        - name: created_at_offset
          type:
            nullable: true
            scalar: timestamptz
      name: token_price_history_offset
      select_permissions:
        - permission:
            columns:
              - id
              - token
              - price
              - created_at
              - internal_token_transaction_ref
            filter: {}
          role: public
  native_queries:
    - arguments: {}
      code: SELECT * FROM formatted_tokens
      returns: GetFormattedTokensResult
      root_field_name: GetFormattedTokens
    - arguments:
        offset:
          description: ""
          nullable: false
          type: interval
      code: select *, created_at + {{offset}} as created_at_offset from account_transaction
      returns: account_transaction_offset_model
      root_field_name: account_transaction_offset
    - arguments:
        offset:
          description: ""
          nullable: false
          type: interval
      code: SELECT *, created_at + {{offset}} as created_at_offset from token_price_history
      returns: token_price_history_offset
      root_field_name: token_price_history_offset
  tables: "!include default/tables/tables.yaml"
  functions: "!include default/functions/functions.yaml"
